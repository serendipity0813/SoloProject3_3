# SoloProject3_3 - 퍼즐게임 만들기 [스탠다드반 유준영]


## 0. 프로젝트 소개

- 프로젝트 종류 : 유니티 심화과정 개인과제 - 자유주제의 게임제작 프로젝트
  
- 프로젝트 내용 : 지금까지 활용한 유니티 기술들을 활용하여 시중에 많이 있는 퍼즐게임을 조금 다른 방식으로 구현해보았습니다.
    
- 개발기간 : 2023.12.27 ~ 2023.12.29


## 1. 게임 기본로직



1. 게임 시작시 게임 판 위에 56개의 오리가 랜덤으로 생성된다
   
    -> 플레이어는 1개의 오리를 손에 들고있다 ( 랜덤으로 할지는 아직 미정)
   
    -> 순서를 나타내도록 하는 배열과 현재 어떤 오리가 나와있는지를 체크하는 배열을 생성한 후 Random.Range를 통해 각자 랜덤한 오리가 생성되도록 함
   
---

2. 마우스로 게임 판 위의 오리를 클릭하면 손에 들고 있던 오리와 바뀐다

    -> 마우스 클릭시 마우스의 위치를 WORLD 값으로 받아온 후 그 값을 행, 열 값으로 변환 후 배열에서 몇 번째 순서에있는지 체크하여 클릭한 오브젝트를 판단함

    -> 그 이후 내가 들고있는 오리와 클릭한 오리의 번호를 교환하는 식으로 진행

    #### 내가 클릭한 위치를 화면상의 행, 열 값으로 변환하는 부분이 오래걸림


---

3. 오리가 바뀐 후 상하좌우에 같은 오리가 있는지 체크한다
   
    -> 배열의 앞, 뒤 번호와 한 행의 갯수만큼 더하거나 빼준 값에 있는 번호의 오리번호와 바뀐 오리번호가 같은지 여부를 체크한 후 같다면 배열의 bool값을 변환

---

4. 상하좌우에 같은 오리가 있다면 그 오리의 상하좌우에 또 같은 오리가 있는지

    연속적으로 체크한다 (이어진 오리가 없을 때 까지)

    -> bool 배열을 따로 만들어서 체크 관리 + 주변 매칭 성공여부 체크용 bool 변수 선언

    -> 바뀐 오리의 위치(배열에서의 번호) 와 바뀐 오리의 번호를 매개변수로 받으면서 상, 하, 좌, 우 위치에 오리가 있는지 체크

    -> 오리가 있다면 그 오리가 바뀐 오리와 같은 오리인지 체크하고 만약 같다면 bool 값을 바꿔주면서 그 위치에서 다시 함수 재귀호출

    ##### 예상했지만 StacOverFlow가 발생하였고 bool 배열을 통해 해당 위치에서 함수 재귀호출 여부에 조건을 걸어주면서 해결함

---

5. 이어져 있는 같은 오리를 지우면서 포인트를 획득하고 새로운 랜덤 오리가 비워진 자리에 생성되도록 한다

    -> 4번에서 bool 값을 true바뀐 번호를 이용하여 해당 번호의 오리들을 지우고 새로운 오리가 랜덤으로 생성되도록 함수 호출 +  사운드 이펙트, 파티클 이펙트 호출

    #### 특정 위치에서 파티클 이펙트가 생성되도록 하는 부분과 일정시간 후 삭제되는 부분에서 조금 고민했지만 이미 위치는 알고 있어서 해당 부분의 번호를 매개변수로 받아와서 위치로 바꿔준 후 instantiate 하도록     하였고 invoke 등으로 이펙트를 지울까 하였지만 프리펩에 스크립트를 따로 달아서 해결함 (일정시간후 게임오브젝트를 삭제하는 식으로 일괄관리)


---

6. 일정 포인트 이상 획득, 미션 달성 등을 통해 게임 클리어를 하도록 한다 (스테이지 상승)

    -> 이부분은 다른 기능들을 구현한 이후 추가 구현을 시도해보려고 함

    #### 플레이어가 가진 오리로 더이상 게임 플레이가 불가능한 경우는 배제함 -> 게임 판의 오리와 플레이어 오리 교체가 가능하므로 횟수가 소모되지만 플레이 가능
    

## 2. [프로젝트 진행현황 및 구현목표]

1. 게임 시작화면 기본 틀 제작 + 씬 전환 버튼 - 완료

2. 메인 게임화면 전체적인 UI 제작 - 완료

3. 게임 진행을 위한 기본적인 UI 및 오브젝트 제작 - 완료

4. 게임 기본로직 구현 진행 - 완료

5. 게임 UI들 게임정보 연동시키기 - 미진행  ( 점수로직, 교체가능횟수?, 제한시간?, 스테이지 or 레벨? 등)

6. 게임 진행 배경음악 및 효과음 만들어보기 - 완료

+ 에셋 이펙트를 통해 특정 위치에서 파티클 효과 생성 및 일정시간 후 삭제 구현

7. 설정창 UI 구현 및 소리조절 기능 만들어보기 - 미진행


-----여기까지 개인과제 목표 / 이후 진행은 개인공부 -----


- 아이템 사용기능 구현해보기

- 추가 스테이지 구현해보기 

- 게임 시작씬 꾸미기

- 게임 스테이지를 고르거나 스토리가 진행되는? 메인 씬 구현하기
  
- 게임 진행을 통한 업적이나 결과물을 확인할 수 있는 씬 만들기

- UI 및 기타 요소들 정리하고 다듬어보기 (배경, 효과음, 오브젝트 이미지 등등)

- 사용된 코드들 리팩토링 해보기

- 게임 빌드하여 apk 파일 등으로 만들어보기

- 사용자 데이터 저장 및 관리체계 만들어보기

- 게임 출시하는 과대망상 해보기




## 3. 개인과제 리뷰

1. 지난 강의때와 달리 이번에는 강의가 어렵긴 하지만 시간적으로는 볼륨이 적은 편이라 개인과제에 조금 더 집중할 수 있었고 배웠던 내용을 복습하고 활용해보기에 좋은 시간이었음

2. 장르가 퍼즐게임이다 보니 생각보다 내부 로직 구현이 어려웠고 (시중 게임보다 쉬운 방식임에도 불구하고) 조금 아쉬운 부분도 있지만 알고리즘 문제를 풀이하는 방식처럼 구현하니 그래도 기능이 잘 구현된 것 같음

 
3. 스택 오버플로우가 발생하거나, 가장 우측 오브젝트를 누르면 한 칸 넘어가서 좌측 오브젝트가 터지거나, 화면의 위치와 다른 곳의 오브젝트가 인식되거나 하는 어려움들이 있었으나 디버그로그를 활용하여 어떤 부분에서
   연결이 잘못되거나 인식이 잘못되었는지 따라가면서 하나하나 천천히 해결하여 버그도 대부분 잡았음 (아마도,,,?)
   
4. 게임 기능 구현은 어느 정도  되었지만 UI나 스테이지 구성, 시작씬, 기타 요소들 등등 아직 부족한 부분이 많기 때문에 개인과제 제출 이후에도 리팩토링 하면서 프로젝트를 완성해보려고 함

